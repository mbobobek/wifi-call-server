<!doctype html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WiFi VoIP (LAN)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="bg-glow"></div>
  <main class="layout">
    <header class="hero">
      <div class="logo-stack">
        <img src="logo-wca.png" alt="WCA" class="logo">
        <div>
          <p class="eyebrow">WiFi-Call-App</p>
          <h1>Tezkor LAN/Internet audio qo‘ng‘iroqlar</h1>
        </div>
      </div>
    </header>

    <!-- Home Screen -->
    <section class="screen active" id="screen-home">
      <div class="card glass">
        <label for="name">Ismingiz/Nickname</label>
        <input id="name" type="text" placeholder="Masalan: Ali" autocomplete="off">
        <p class="hint">Saqlanadi (localStorage), onlaynga chiqqanda serverga yuboriladi.</p>
      </div>

      <div class="card glass compact">
        <div class="status-chip">Holat: <span id="status">tayyor emas</span></div>
        <div class="ringing" id="ring"></div>
        <button id="connect" class="primary full">Onlayn bo'lish</button>
      </div>

      <div class="card glass">
        <div class="section-title">Onlayn foydalanuvchilar</div>
        <div id="online" class="online-list">Ulanish tugmasini bosing</div>
      </div>
    </section>

    <!-- Outgoing Call Screen -->
    <section class="screen" id="screen-calling">
      <div class="card glass center">
        <div class="logo-wave"></div>
        <div class="call-title">Chaqirilmoqda...</div>
        <div class="call-name" id="outgoing-name"></div>
        <div class="ringing">Javob kutilmoqda</div>
      </div>
      <button id="outgoing-cancel" class="danger full pill">Bekor qilish</button>
    </section>

    <!-- Incoming Call Screen -->
    <section class="screen" id="screen-incoming">
      <div class="card glass center">
        <div class="waveform">
          <span></span><span></span><span></span><span></span>
        </div>
        <div class="call-title">Kirish qo‘ng‘irog‘i</div>
        <div class="call-name" id="incoming-name"></div>
      </div>
      <div class="floating-actions">
        <button id="incoming-decline" class="round danger">✕</button>
        <button id="incoming-accept" class="round primary">✓</button>
      </div>
    </section>

    <!-- In-Call Screen -->
    <section class="screen" id="screen-incall">
      <div class="card glass center">
        <div class="waveform solid">
          <span></span><span></span><span></span><span></span>
        </div>
        <div class="call-title" id="incall-name"></div>
        <div class="status-chip timer">Vaqt: <span id="call-timer">00:00</span></div>
      </div>
      <div class="btns spaced">
        <button id="mute" class="secondary pill" disabled>Mute</button>
        <button id="hangup" class="danger pill" disabled>Uzish</button>
        <button id="back" class="ghost pill">Orqaga</button>
      </div>
    </section>

    <section class="card glass logs">
      <div class="section-title">Log</div>
      <div id="log"></div>
      <div class="debug">
        <div>Call state: <span id="debug-state">idle</span></div>
        <div>PC: <span id="debug-pc">none</span></div>
        <div>ICE: <span id="debug-ice">none</span></div>
        <div>Signal: <span id="debug-signal">none</span></div>
      </div>
    </section>

    <audio id="remote" autoplay></audio>
  </main>
  <script>
    // TURN sozlamalarini kerak bo'lsa to'ldiring (internet orqali ishlatish uchun)
    window.TURN_URL = '';
    window.TURN_USER = '';
    window.TURN_PASS = '';
  </script>
  <script src="app.js"></script>
</body>
</html>
